<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Address lookup - Part 1 - Analysis | Tintamarre</title>
    <meta name="description" content="Personal blog of Martin Erpicum">
    <link rel="preload stylesheet" href="/assets/style.dda83dd5.css" as="style">
    <script type="module" src="/assets/app.18f6ca1c.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/assets/chunks/framework.4bfe0024.js">
  <link rel="modulepreload" href="/assets/chunks/theme.c9f1357e.js">
  <link rel="modulepreload" href="/assets/blog_posts_2024_address_lookup-part1-problematic.md.f8317f05.lean.js">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-56839c3d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9eb42e17></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9eb42e17> Skip to content </a><!--]--><!----><header class="VPNav" data-v-56839c3d data-v-8246f099><div class="VPNavBar" data-v-8246f099 data-v-70adf6b5><div class="container" data-v-70adf6b5><div class="title" data-v-70adf6b5><div class="VPNavBarTitle" data-v-70adf6b5 data-v-8e118abc><a class="title" href="/" data-v-8e118abc><!--[--><!--]--><!----><!--[-->Tintamarre<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-70adf6b5><div class="curtain" data-v-70adf6b5></div><div class="content-body" data-v-70adf6b5><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-70adf6b5><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-70adf6b5 data-v-1419bb5f><span id="main-nav-aria-label" class="visually-hidden" data-v-1419bb5f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-1419bb5f data-v-58627f5e data-v-390ea14c><!--[-->Home<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-1419bb5f data-v-37dff3b8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-37dff3b8><span class="text" data-v-37dff3b8><!----> Blog <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-37dff3b8><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-37dff3b8><div class="VPMenu" data-v-37dff3b8 data-v-4f471a21><div class="items" data-v-4f471a21><!--[--><!--[--><div class="VPMenuLink" data-v-4f471a21 data-v-f41bc5f1><a class="VPLink link" href="/blog/" data-v-f41bc5f1 data-v-390ea14c><!--[-->Blog Home<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4f471a21 data-v-f41bc5f1><a class="VPLink link" href="/blog/tags.html" data-v-f41bc5f1 data-v-390ea14c><!--[-->Tags<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4f471a21 data-v-f41bc5f1><a class="VPLink link" href="/blog/archives.html" data-v-f41bc5f1 data-v-390ea14c><!--[-->Archives<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-70adf6b5 data-v-7a8f8935><label title="toggle dark mode" data-v-7a8f8935 data-v-b6ab651e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-b6ab651e data-v-c8b4d4cf><span class="check" data-v-c8b4d4cf><span class="icon" data-v-c8b4d4cf><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-b6ab651e><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-b6ab651e><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-70adf6b5 data-v-7d9f08cb data-v-37dff3b8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-37dff3b8><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-37dff3b8><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-37dff3b8><div class="VPMenu" data-v-37dff3b8 data-v-4f471a21><!----><!--[--><!--[--><!----><div class="group" data-v-7d9f08cb><div class="item appearance" data-v-7d9f08cb><p class="label" data-v-7d9f08cb>Appearance</p><div class="appearance-action" data-v-7d9f08cb><label title="toggle dark mode" data-v-7d9f08cb data-v-b6ab651e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-b6ab651e data-v-c8b4d4cf><span class="check" data-v-c8b4d4cf><span class="icon" data-v-c8b4d4cf><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-b6ab651e><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-b6ab651e><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-70adf6b5 data-v-cba97204><span class="container" data-v-cba97204><span class="top" data-v-cba97204></span><span class="middle" data-v-cba97204></span><span class="bottom" data-v-cba97204></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-56839c3d data-v-049ec038><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-049ec038 data-v-f8751f8e><button data-v-f8751f8e>Return to top</button><!----></div></div><!----><div class="VPContent" id="VPContent" data-v-56839c3d data-v-baf0af1a><div class="VPDoc has-aside" data-v-baf0af1a data-v-abdcb82b><!--[--><!--]--><div class="container" data-v-abdcb82b><div class="left-aside aside" data-v-abdcb82b><div class="aside-curtain" data-v-abdcb82b></div><div class="aside-container" data-v-abdcb82b><div class="aside-content" data-v-abdcb82b><div class="VPDocAside" data-v-abdcb82b data-v-7dd2b804><!--[--><!--[--><!--[--><!--[--><!--[--><span class="bg-primary-100 inline-flex items-center rounded text-sm font-medium"><div data-v-262d93ff><!----><span data-v-262d93ff>Exploration</span></div></span><span class="bg-primary-100 inline-flex rounded text-sm font-medium"><div class="flex flex-wrap gap-2 py-5"><!--[--><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=data_model"><!----> data_model</a><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=data_analysis"><!----> data_analysis</a><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=orchestrator"><!----> orchestrator</a><!--]--></div></span><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 dark:xl:border-slate-200/5" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Authors</dt><dd data-v-f51709bc><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8" data-v-f51709bc><li class="flex items-center space-x-2" data-v-f51709bc><img src="https://gravatar.com/avatar/4f70a53dd35d6ef71c47711614e1b40a" alt="author image" class="h-10 w-10 rounded-full" data-v-f51709bc><dl class="whitespace-nowrap text-sm font-medium leading-5" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Name</dt><dd class="text-gray-900 dark:text-white" data-v-f51709bc><a href="/blog/authors/martin-erpicum.html" class="text-lg text-gray-900 hover:text-[color:var(--vp-c-brand-light)] dark:text-white dark:hover:text-[color:var(--vp-c-brand-dark)]" data-v-f51709bc>Martin Erpicum</a></dd><dt class="sr-only" data-v-f51709bc>Twitter</dt><dd data-v-f51709bc><a href="https://twitter.com/@tintamarre" target="_blank" rel="noopener noreferrer" data-v-f51709bc>@tintamarre</a></dd></dl></li></ul></dd></dl><!--]--><!--]--><!--]--><!--]--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-7dd2b804 data-v-a96026ac><div class="content" data-v-a96026ac><div class="outline-marker" data-v-a96026ac></div><div class="outline-title" data-v-a96026ac>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-a96026ac><span class="visually-hidden" id="doc-outline-aria-label" data-v-a96026ac> Table of Contents for current page </span><ul class="root" data-v-a96026ac data-v-f60dfdf1><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-7dd2b804></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><footer class="mb-24 divide-y divide-gray-200 text-sm font-medium leading-5 dark:divide-slate-200/5" data-v-2f3a5683><div class="py-3" data-v-2f3a5683><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-white" data-v-2f3a5683> Next Article </h2><div class="link" data-v-2f3a5683><a href="/blog/posts/2024/tax_brackets_proposition.html" data-v-2f3a5683>Tax brackets proposition</a></div></div><div class="py-3" data-v-2f3a5683><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-white" data-v-2f3a5683> Previous Article </h2><div class="link" data-v-2f3a5683><a href="/blog/posts/2024/hello_world.html" data-v-2f3a5683>Hello World</a></div></div><div class="pt-3" data-v-2f3a5683><a class="link" href="/blog/" data-v-2f3a5683>← Back to the blog</a></div></footer><!----><!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-abdcb82b><div class="content-container" data-v-abdcb82b><!--[--><!--[--><!--[--><!--[--><header class="space-y-1 pt-6 text-center xl:pb-10"><dl><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-300"><time datetime="2024-10-03T12:00:00.000Z">October 3, 2024</time></dd></dl><h1 class="md:leading-14 text-3xl font-extrabold leading-9 tracking-tight text-[color:var(--vp-c-brand-dark)] dark:text-[color:var(--vp-c-brand-light)] sm:text-4xl sm:leading-10 md:text-5xl">Address lookup - Part 1 - Analysis</h1></header><!--[--><div class="xs:show xl:hidden flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><span class="bg-primary-100 inline-flex items-center rounded text-sm font-medium"><div data-v-262d93ff><!----><span data-v-262d93ff>Exploration</span></div></span></div><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 dark:xl:border-slate-200/5 xs:show xl:hidden" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Authors</dt><dd data-v-f51709bc><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8" data-v-f51709bc><li class="flex items-center space-x-2" data-v-f51709bc><img src="https://gravatar.com/avatar/4f70a53dd35d6ef71c47711614e1b40a" alt="author image" class="h-10 w-10 rounded-full" data-v-f51709bc><dl class="whitespace-nowrap text-sm font-medium leading-5" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Name</dt><dd class="text-gray-900 dark:text-white" data-v-f51709bc><a href="/blog/authors/martin-erpicum.html" class="text-lg text-gray-900 hover:text-[color:var(--vp-c-brand-light)] dark:text-white dark:hover:text-[color:var(--vp-c-brand-dark)]" data-v-f51709bc>Martin Erpicum</a></dd><dt class="sr-only" data-v-f51709bc>Twitter</dt><dd data-v-f51709bc><a href="https://twitter.com/@tintamarre" target="_blank" rel="noopener noreferrer" data-v-f51709bc>@tintamarre</a></dd></dl></li></ul></dd></dl><!--]--><!--]--><!----><!--]--><!--]--><!--]--><!----><main class="main" data-v-abdcb82b><div style="position:relative;" class="vp-doc _blog_posts_2024_address_lookup-part1-problematic" data-v-abdcb82b><div><p><em>Executive summary</em>: In Belgium, a collaborative effort between regional and federal authorities has led to the creation of a unified service that aggregates all Belgian addresses into a comprehensive dataset. This dataset is called <a href="https://bosa.belgium.be/fr/services/best-address-services" target="_blank" rel="noreferrer">BeStAddress</a>.</p><hr><h1 id="address-lookup-analysis-1" tabindex="-1">Address lookup - Analysis (1) <a class="header-anchor" href="#address-lookup-analysis-1" aria-label="Permalink to &quot;Address lookup - Analysis (1)&quot;">​</a></h1><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>This article outlines an experiment conducted by the <strong>Data Office</strong> of the <strong>Ministère de la Fédération Wallonie-Bruxelles</strong> aimed at leveraging existing address datasets more effectively.</p><p>The primary objective is to optimize the process of looking up addresses by postal codes, street names, and house numbers within these datasets, and eventually matching them with the <strong>BeStAddress</strong> dataset.</p><p>In Belgium, a collaborative initiative led by <strong>BOSA</strong>, in partnership with regional and federal authorities, resulted in the creation of a unified service that consolidates all Belgian addresses into a single, comprehensive dataset known as <a href="https://bosa.belgium.be/fr/services/best-address-services" target="_blank" rel="noreferrer">BeStAddress</a>.</p><h2 id="quick-overview-of-bestaddress" tabindex="-1">Quick overview of BeStAddress <a class="header-anchor" href="#quick-overview-of-bestaddress" aria-label="Permalink to &quot;Quick overview of BeStAddress&quot;">​</a></h2><p>At first glance, the dataset appears to be quite comprehensive, providing a wealth of information on addresses in Belgium. Key data points include:</p><ul><li><strong>Municipality names</strong> in French, Dutch, and German</li><li><strong>Postnames</strong> in French, Dutch, and German: In Belgium, postnames are used to identify specific zones within a municipality or across parts of one or several municipalities (further details on this will be provided later).</li><li><strong>Street names</strong> in French, Dutch, and German (often available in only one language depending on the region)</li><li><strong>Postcodes</strong></li><li><strong>House numbers</strong></li><li><strong>Box numbers</strong></li></ul><h3 id="example-of-a-single-record-as-json" tabindex="-1">Example of a single record (as JSON): <a class="header-anchor" href="#example-of-a-single-record-as-json" aria-label="Permalink to &quot;Example of a single record (as JSON):&quot;">​</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">status</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">streetname_fr</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Rue de la Loi</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">streetname_de</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">null,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">streetname_nl</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Wetstraat</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">house_number</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">16</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">box_number</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">null,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">postcode</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1000</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">municipality_name_fr</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Bruxelles</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">municipality_name_de</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">null,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">municipality_name_nl</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Brussel</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">postname_fr</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Bruxelles (Centre)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">postname_nl</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Brussel (Centrum)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">region_code</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">BE-BRU</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">municipality_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">21004</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">street_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1679</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">address_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">210225</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">EPSG:4326_lat</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">50.84616</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">EPSG:4326_lon</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">4.36653</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">EPSG:31370_x</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">148303.0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">EPSG:31370_y</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">169017.0</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="summarize-the-datasets" tabindex="-1">Summarize the datasets <a class="header-anchor" href="#summarize-the-datasets" aria-label="Permalink to &quot;Summarize the datasets&quot;">​</a></h3><p>Based on the export from BOSA website of the dataset in flat format (gzipped CSV) of the 2024-09-23, the dataset contains <strong>6 608 518 records</strong> of status = <code>current</code>.</p><p>Here are summaries of each column in each dataset:</p><ul><li><a href="https://github.com/tintamarre/tintamarre.github.io/blob/master/src/assets/datasets/bestaddress_bxl.md" target="_blank" rel="noreferrer">Brussels (Bruxelles) dataset summary</a></li><li><a href="https://github.com/tintamarre/tintamarre.github.io/blob/master/src/assets/datasets/bestaddress_vld.md" target="_blank" rel="noreferrer">Flanders (Vlaanderen) dataset summary</a></li><li><a href="https://github.com/tintamarre/tintamarre.github.io/blob/master/src/assets/datasets/bestaddress_wal.md" target="_blank" rel="noreferrer">Wallonia (Wallonie) dataset summary</a></li></ul><p>As we can see, the dataset contains a lot of fields. It is also multilingual, which seems obivious for an official dataset in Belgium (where French, Dutch and German are <a href="https://www.belgium.be/en/about_belgium/government/federale_staat" target="_blank" rel="noreferrer">the official languages</a>). It also contains some <strong>specific identifiers</strong> such as:</p><ul><li><code>municipality_id</code> (unique identifier for each municipality is equal to the <a href="https://en.wikipedia.org/wiki/NIS_code" target="_blank" rel="noreferrer">NIS codes</a>)</li><li><code>street_id</code></li><li><code>address_id</code></li></ul><h2 id="checking-uniqueness-of-the-identifiers" tabindex="-1">Checking uniqueness of the identifiers <a class="header-anchor" href="#checking-uniqueness-of-the-identifiers" aria-label="Permalink to &quot;Checking uniqueness of the identifiers&quot;">​</a></h2><p>The first step is to check the uniqueness of the identifiers in the dataset. We will check if the <code>street_id</code>, <code>municipality_id</code>, and <code>address_id</code> are unique.</p><p>Let&#39;s write a query that will count per region the number of unique <code>street_id</code>, <code>municipality_id</code>, and <code>address_id</code> and the total number of records. If the sum of the unique counts is equal to the total number of records, it means that the identifiers are unique in the dataset.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">BE-BRU</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> region_code,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> municipality_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> municipality_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> street_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> street_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> address_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> address_id_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress_BRU</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">status</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">UNION ALL</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">BE-WAL</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> region_code,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> municipality_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> municipality_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> street_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> street_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> address_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> address_id_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress_WAL</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">status</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">UNION ALL</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">BE-VLG</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> region_code,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> municipality_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> municipality_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> street_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> street_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> address_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> address_id_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress_VLG</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">status</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">UNION ALL</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">TOTAL</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> region_code,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> municipality_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> municipality_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> street_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> street_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> address_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> address_id_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress;</span></span></code></pre></div><h3 id="results" tabindex="-1">Results <a class="header-anchor" href="#results" aria-label="Permalink to &quot;Results&quot;">​</a></h3><table><thead><tr><th>region_code</th><th style="text-align:right;">municipality_id_count</th><th style="text-align:right;">street_id_count</th><th style="text-align:right;">address_id_count</th></tr></thead><tbody><tr><td>BE-BRU</td><td style="text-align:right;">19</td><td style="text-align:right;">5095</td><td style="text-align:right;">790713</td></tr><tr><td>BE-WAL</td><td style="text-align:right;">262</td><td style="text-align:right;">57707</td><td style="text-align:right;">1983442</td></tr><tr><td>BE-VLG</td><td style="text-align:right;">300</td><td style="text-align:right;">80354</td><td style="text-align:right;">3834363</td></tr><tr><td>TOTAL</td><td style="text-align:right;">581</td><td style="text-align:right;">138457</td><td style="text-align:right;">4203561</td></tr><tr><td>SUM = TOTAL</td><td style="text-align:right;"><strong>ok!</strong></td><td style="text-align:right;"><strong>nope</strong></td><td style="text-align:right;"><strong>nope</strong></td></tr></tbody></table><ul><li>The <code>municipality_id</code> is unique in the dataset, which is mean that a municipality is unique in each region and is not shared between regions. This is expected as the <code>municipality_id</code> is equal to the <a href="https://en.wikipedia.org/wiki/NIS_code" target="_blank" rel="noreferrer">NIS codes</a>. The municipalities have a political and administrative meaning and are unique in each region.</li><li>The <code>street_id</code> shows that a street can be shared between multiple municipalities. This is not surprising as some streets can cross multiple municipalities.</li><li>The <code>address_id</code> is not unique throughout the three datasets, but it is probably unique in each dataset.</li></ul><p>Let&#39;s check the uniqueness of the <code>address_id</code> in each dataset.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">BE-BRU</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> region_code,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> address_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> address_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;">) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> total_row_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress_BRU</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">status</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">UNION ALL</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">BE-WAL</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> region_code,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> address_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> address_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;">) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> total_row_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress_WAL</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">status</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">UNION ALL</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">BE-VLG</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> region_code,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> address_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> address_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;">) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> total_row_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress_VLG</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">status</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">UNION ALL</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">TOTAL</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> region_code,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> address_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> address_id_count,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;">) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> total_row_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress;</span></span></code></pre></div><table><thead><tr><th>region_code</th><th style="text-align:right;">address_id_count</th><th style="text-align:right;">total_row_count</th></tr></thead><tbody><tr><td>BE-BRU</td><td style="text-align:right;">790713</td><td style="text-align:right;">790713</td></tr><tr><td>BE-WAL</td><td style="text-align:right;">1983442</td><td style="text-align:right;">1983442</td></tr><tr><td>BE-VLG</td><td style="text-align:right;">3834363</td><td style="text-align:right;">3834363</td></tr><tr><td>TOTAL</td><td style="text-align:right;">4203561</td><td style="text-align:right;">6608518</td></tr></tbody></table><p>Indeed the <code>address_id</code> is unique in each dataset but is not unique throughout the three datasets.</p><h2 id="understanding-the-data-structure-deep-dive" tabindex="-1">Understanding the data structure - Deep dive <a class="header-anchor" href="#understanding-the-data-structure-deep-dive" aria-label="Permalink to &quot;Understanding the data structure - Deep dive&quot;">​</a></h2><p>At first glance, we could think from the variables that a <strong>postcode</strong> include 1 or more municipalities and each municipality include 1 or more streets.</p><p>The model could simply be something like this:</p><div align="center" class=""><img src="https://raw.githubusercontent.com/tintamarre/tintamarre.github.io/refs/heads/master/src/assets/diagrams/best_address_simple_model.drawio.png" alt="best address wrong model" width="800" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400">best address wrong model</span></div></div><p>Let&#39;s check the data to see if this is true.</p><p>In some cases, a street can be shared between 2 municipalities. This is the case for example of the street <strong>Rue de la Loi</strong> which is in postcodes <code>[&#39;1000&#39;, &#39;1012&#39;, &#39;1040&#39;,&#39;1045&#39;, &#39;1049&#39;]</code> for status_code = &#39;BE-BRU&#39;.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span></span>
<span class="line"><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;">(postcode)</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress_bxl</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F78C6C;">AND</span><span style="color:#BABED8;"> street_id </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1679</span></span>
<span class="line"><span style="color:#F78C6C;">AND</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">status</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><p>On the other hand, a <code>municipality_id</code> can belong to multiple postcodes.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span></span>
<span class="line"><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;">(postcode)</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress_bxl</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F78C6C;">AND</span><span style="color:#BABED8;"> municipality_id </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">21004</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">-- Bruxelles</span></span>
<span class="line"><span style="color:#F78C6C;">AND</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">status</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><p>This will return 14 distincts postcodes: <code>[&#39;1047&#39;, &#39;1010&#39;, &#39;1045&#39;, &#39;1030&#39;, &#39;1070&#39;, &#39;1000&#39;, &#39;1020&#39;, &#39;1012&#39;, &#39;1130&#39;, &#39;1040&#39;, &#39;1050&#39;, &#39;1120&#39;, &#39;1007&#39;, &#39;1049&#39;]</code>.</p><p>In reverse, a postcode can have multiple <code>municipality_id</code> values.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span></span>
<span class="line"><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;">(municipality_id)</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress_bxl</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F78C6C;">AND</span><span style="color:#BABED8;"> postcode </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1050</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">-- Ixelles</span></span>
<span class="line"><span style="color:#F78C6C;">AND</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">status</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><p>This will return 3 distincts <code>municipality_id</code>: <code>[&#39;21009&#39;, &#39;21013&#39;, &#39;21004&#39;]</code>.</p><p>Finally, a street with the same name, could have multiple <code>street_id</code> and <code>municipality_id</code> even within the same postcode. This is the case for example of the street <strong><code>Avenue Louise</code></strong>.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span></span>
<span class="line"><span style="color:#BABED8;">municipality_id,</span></span>
<span class="line"><span style="color:#BABED8;">street_id,</span></span>
<span class="line"><span style="color:#BABED8;">postcode</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress_BRU</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F78C6C;">AND</span><span style="color:#BABED8;"> streetname_fr </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Avenue Louise</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">AND</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">status</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">GROUP BY</span><span style="color:#BABED8;"> all;</span></span></code></pre></div><table><thead><tr><th style="text-align:right;">municipality_id</th><th style="text-align:right;">street_id</th><th>postcode</th></tr></thead><tbody><tr><td style="text-align:right;">21004</td><td style="text-align:right;">1858</td><td>1050</td></tr><tr><td style="text-align:right;">21009</td><td style="text-align:right;">3919</td><td>1050</td></tr><tr><td style="text-align:right;">21013</td><td style="text-align:right;">751</td><td>1060</td></tr></tbody></table><h2 id="global-overview" tabindex="-1">Global overview <a class="header-anchor" href="#global-overview" aria-label="Permalink to &quot;Global overview&quot;">​</a></h2><p>To better understand the relationships between the different entities in the dataset, we can perform some checks to see if there are any <strong>many-to-many</strong> relationships between the entities.</p><div align="center" class=""><img src="https://raw.githubusercontent.com/tintamarre/tintamarre.github.io/refs/heads/master/src/assets/diagrams/best_address_postcode_vs_municipality.drawio.png" alt="Let&#39;s check the data" width="800" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400">Let&#39;s check the data</span></div></div><h3 id="_1-checking-if-a-postcode-belongs-to-multiple-municipality-id-values" tabindex="-1">1. Checking if a postcode belongs to multiple <code>municipality_id</code> values <a class="header-anchor" href="#_1-checking-if-a-postcode-belongs-to-multiple-municipality-id-values" aria-label="Permalink to &quot;1. Checking if a postcode belongs to multiple `municipality_id` values&quot;">​</a></h3><p>To check if a postcode is associated with multiple <code>municipality_id</code> values, you can group by the postcode and count distinct <code>municipality_id</code> values. If a postcode has more than 1 unique municipality_id, it means that the postcode is associated with multiple municipalities.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#BABED8;"> postcode,</span></span>
<span class="line"><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> municipality_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> municipality_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress</span></span>
<span class="line"><span style="color:#F78C6C;">GROUP BY</span><span style="color:#BABED8;"> postcode</span></span>
<span class="line"><span style="color:#F78C6C;">HAVING</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> municipality_id) </span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;">;</span></span></code></pre></div><table><thead><tr><th>postcode</th><th style="text-align:right;">municipality_count</th></tr></thead><tbody><tr><td>4910</td><td style="text-align:right;">2</td></tr><tr><td>1050</td><td style="text-align:right;">3</td></tr><tr><td>1030</td><td style="text-align:right;">2</td></tr><tr><td>1070</td><td style="text-align:right;">2</td></tr><tr><td>1040</td><td style="text-align:right;">2</td></tr></tbody></table><p>This query will return all postcodes that are associated with more than one <code>municipality_id</code>. We only get 5 postcodes that are associated with multiple municipalities.</p><h3 id="_2-checking-if-a-municipality-id-belongs-to-multiple-postcode-values" tabindex="-1">2. Checking if a <code>municipality_id</code> belongs to multiple postcode values <a class="header-anchor" href="#_2-checking-if-a-municipality-id-belongs-to-multiple-postcode-values" aria-label="Permalink to &quot;2. Checking if a `municipality_id` belongs to multiple postcode values&quot;">​</a></h3><p>Similarly, to check if a <code>municipality_id</code> is associated with multiple postcode values, group by <code>municipality_id</code> and count distinct postcode values. If a <code>municipality_id</code> has more than 1 unique postcode, it means that the <code>municipality_id</code> is associated with multiple postcodes.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#BABED8;"> municipality_id,</span></span>
<span class="line"><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> postcode) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> postcode_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress</span></span>
<span class="line"><span style="color:#F78C6C;">GROUP BY</span><span style="color:#BABED8;"> municipality_id</span></span>
<span class="line"><span style="color:#F78C6C;">HAVING</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> postcode) </span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;">;</span></span></code></pre></div><table><thead><tr><th style="text-align:right;">municipality_id</th><th style="text-align:right;">postcode_count</th></tr></thead><tbody><tr><td style="text-align:right;">73042</td><td style="text-align:right;">2</td></tr><tr><td style="text-align:right;">11002</td><td style="text-align:right;">14</td></tr><tr><td style="text-align:right;">...</td><td style="text-align:right;">...</td></tr></tbody></table><p>This query will return all <strong>municipality_id</strong> that are associated with more than one postcode. We have a 221 <strong>municipality_id</strong> that are associated with multiple postcodes. Only the first ones are shown here.</p><p>The relationship between postcodes and municipalities is then a <strong>many-to-many relationship</strong>.</p><h3 id="_3-checking-if-a-street-id-belongs-to-multiple-municipality-id-values" tabindex="-1">3. Checking if a <code>street_id</code> belongs to multiple <code>municipality_id</code> values <a class="header-anchor" href="#_3-checking-if-a-street-id-belongs-to-multiple-municipality-id-values" aria-label="Permalink to &quot;3. Checking if a `street_id` belongs to multiple `municipality_id` values&quot;">​</a></h3><p>To check if a street is associated with multiple municipalities, you can group by the <code>street_id</code> and count distinct <code>municipality_id</code> values. If a street has more than 1 unique municipality_id, it means that the street is associated with multiple municipalities.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#BABED8;"> concat_ws(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">,region_code, street_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> unique_street,</span></span>
<span class="line"><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> municipality_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> municipality_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress</span></span>
<span class="line"><span style="color:#F78C6C;">GROUP BY</span><span style="color:#BABED8;"> concat_ws(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">,region_code, street_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> unique_street</span></span>
<span class="line"><span style="color:#F78C6C;">HAVING</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> municipality_id) </span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;">;</span></span></code></pre></div><p>This query will return all street_ids in the same region that are associated with more than one <code>municipality_id</code>. We have <strong>15</strong> street_id that are associated with more than one municipality_id.</p><h3 id="_4-checking-if-a-street-id-can-have-multiple-postname-values" tabindex="-1">4. Checking if a <code>street_id</code> can have multiple <code>postname_*</code> values <a class="header-anchor" href="#_4-checking-if-a-street-id-can-have-multiple-postname-values" aria-label="Permalink to &quot;4. Checking if a `street_id` can have multiple `postname_*` values&quot;">​</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span></span>
<span class="line"><span style="color:#BABED8;">concat_ws(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">,municipality_id, street_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> unique_street,</span></span>
<span class="line"><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> concat_ws(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> / </span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">, postname_fr, postname_nl)) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> postname_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress</span></span>
<span class="line"><span style="color:#F78C6C;">GROUP BY</span><span style="color:#BABED8;"> all</span></span>
<span class="line"><span style="color:#F78C6C;">HAVING</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;"> default_postname) </span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;">;</span></span></code></pre></div><p>This query will return all unique streets that are associated with more than one <code>postname_*</code> values. We have 3104 unique streets that are associated with more than one <code>postname_*</code> values.</p><p>Example of a street with multiple postnames:</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span></span>
<span class="line"><span style="color:#F78C6C;">DISTINCT</span><span style="color:#BABED8;">(default_postname),</span></span>
<span class="line"><span style="color:#82AAFF;">COUNT</span><span style="color:#BABED8;">(address_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#BABED8;"> address_count</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> bestAddress</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#BABED8;"> municipality_id </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">25117</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">AND</span><span style="color:#BABED8;"> street_id </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">7705267</span></span>
<span class="line"><span style="color:#F78C6C;">GROUP BY</span><span style="color:#BABED8;"> all;</span></span></code></pre></div><table><thead><tr><th>default_postname</th><th style="text-align:right;">address_count</th></tr></thead><tbody><tr><td>Chastre</td><td style="text-align:right;">32</td></tr><tr><td>Villeroux</td><td style="text-align:right;">1</td></tr></tbody></table><p>We conclude that a street can be associated with multiple postnames.</p><h2 id="takeaways-from-the-analysis" tabindex="-1">Takeaways from the analysis <a class="header-anchor" href="#takeaways-from-the-analysis" aria-label="Permalink to &quot;Takeaways from the analysis&quot;">​</a></h2><div align="center" class=""><img src="https://raw.githubusercontent.com/tintamarre/tintamarre.github.io/refs/heads/master/src/assets/diagrams/best_address_model.drawio.png" alt="Let&#39;s check the data" width="800" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400">Let&#39;s check the data</span></div></div><ul><li>The <code>postcode</code> can be associated with multiple <code>municipality_id</code> values and a <code>municipality_id</code> can be associated with multiple <code>postcode</code> values. The relationship between postcodes and municipalities is then a <strong>many-to-many relationship</strong>.</li><li>The <code>municipality_id</code> is unique in the dataset, which is mean that a municipality is unique in each region and is not shared between regions.</li><li>The <code>address_id</code> is unique in each dataset but is not unique throughout the three datasets. A same <code>address_id</code> can be found in multiple regions.</li><li>The <code>street_id</code> shows that a street can be shared between multiple municipalities and that a municipality can have multiple streets. The relationship between streets and municipalities is then a <strong>many-to-many relationship</strong>.</li><li>Postname are not unique for a street. A single street can have multiple postnames. We will consider the <code>postname_*</code> as an attribute of the address and not as a key.</li></ul><h2 id="next-steps" tabindex="-1">Next steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next steps&quot;">​</a></h2><p>In the next article, we will explore build a Big Table model of the dataset to use it in a more efficient way for address lookup.</p><p>Next steps: <a href="/blog/posts/2024/address_lookup-part2-sourcing.html">Address lookup - Part 2 - Sourcing</a></p><h3 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to &quot;References&quot;">​</a></h3><ul><li><a href="https://en.wikipedia.org/wiki/NIS_code" target="_blank" rel="noreferrer">NIS codes</a></li><li><a href="https://www.smalsresearch.be/pourquoi-une-adresse-belge-cest-complique/" target="_blank" rel="noreferrer">Pourquoi une adresse belge, c&#39;est compliqué ?</a></li><li><a href="https://bosa.belgium.be/fr/services/best-address-services" target="_blank" rel="noreferrer">BOSA - BeStAddress</a></li></ul></div></div></main><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-56839c3d data-v-9d18c063><div class="container" data-v-9d18c063><p class="message" data-v-9d18c063>Made with ❤️</p><p class="copyright" data-v-9d18c063>WTFPL License | <a href="https://github.com/tintamarre/tintamarre.github.io">Source code</a></p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"blog_posts_2024_address_lookup-part1-problematic.md\":\"f8317f05\",\"blog_posts_2024_hello_world.md\":\"5197f3c3\",\"assets_datasets_bestaddress_vld.md\":\"81b76668\",\"blog_index.md\":\"795fd32b\",\"blog_authors_martin-erpicum.md\":\"0a76c6c9\",\"assets_datasets_bestaddress_bxl.md\":\"66a1ace2\",\"blog_archives.md\":\"4f60f923\",\"index.md\":\"3a593856\",\"blog_posts_2024_address_lookup-part2-sourcing.md\":\"7320eea0\",\"theme-test.md\":\"6c5d79e4\",\"assets_datasets_bestaddress_wal.md\":\"154ceb5f\",\"blog_posts_2024_tax_brackets_proposition.md\":\"0a0e37f5\",\"blog_tags.md\":\"029d5e0f\",\"blog_posts_2024_address_lookup-part2b-messing-around.md\":\"13c52e5f\",\"blog__partials_basics.md\":\"526572f6\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Tintamarre\",\"description\":\"Personal blog of Martin Erpicum\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"blog\":{\"title\":\"\",\"description\":\"Some thoughts\",\"defaultAuthor\":\"Martin Erpicum\",\"categoryIcons\":{\"article\":\"i-[heroicons-outline/book-open]\",\"tutorial\":\"i-[heroicons-outline/academic-cap]\",\"document\":\"i-[heroicons-outline/annotation]\",\"experimentation\":\"i-[heroicons-outline/beaker]\"},\"tagIcons\":{\"github\":\"i-[carbon/logo-github]\",\"vue\":\"i-[carbon/logo-vue]\"}},\"footer\":{\"message\":\"Made with ❤️\",\"copyright\":\"WTFPL License | <a href=\\\"https://github.com/tintamarre/tintamarre.github.io\\\">Source code</a>\"},\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Blog\",\"items\":[{\"text\":\"Blog Home\",\"link\":\"/blog/\",\"activeMatch\":\"/blog/$\"},{\"text\":\"Tags\",\"link\":\"/blog/tags\",\"activeMatch\":\"/blog/tags\"},{\"text\":\"Archives\",\"link\":\"/blog/archives\",\"activeMatch\":\"/blog/archives\"}]}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>