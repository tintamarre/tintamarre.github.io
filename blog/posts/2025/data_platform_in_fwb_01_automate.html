<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Data Platform - Part 2: Automate everything | Tintamarre</title>
    <meta name="description" content="Personal blog of Martin Erpicum">
    <link rel="preload stylesheet" href="/assets/style.35391763.css" as="style">
    <script type="module" src="/assets/app.82b53087.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/assets/chunks/framework.f141d1be.js">
  <link rel="modulepreload" href="/assets/chunks/theme.40cb5bd0.js">
  <link rel="modulepreload" href="/assets/blog_posts_2025_data_platform_in_fwb_01_automate.md.21746e48.lean.js">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-56839c3d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9eb42e17></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9eb42e17> Skip to content </a><!--]--><!----><header class="VPNav" data-v-56839c3d data-v-8246f099><div class="VPNavBar" data-v-8246f099 data-v-70adf6b5><div class="container" data-v-70adf6b5><div class="title" data-v-70adf6b5><div class="VPNavBarTitle" data-v-70adf6b5 data-v-8e118abc><a class="title" href="/" data-v-8e118abc><!--[--><!--]--><!----><!--[-->Tintamarre<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-70adf6b5><div class="curtain" data-v-70adf6b5></div><div class="content-body" data-v-70adf6b5><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-70adf6b5><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-70adf6b5 data-v-1419bb5f><span id="main-nav-aria-label" class="visually-hidden" data-v-1419bb5f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-1419bb5f data-v-58627f5e data-v-390ea14c><!--[-->Home<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-1419bb5f data-v-37dff3b8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-37dff3b8><span class="text" data-v-37dff3b8><!----> Blog <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-37dff3b8><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-37dff3b8><div class="VPMenu" data-v-37dff3b8 data-v-4f471a21><div class="items" data-v-4f471a21><!--[--><!--[--><div class="VPMenuLink" data-v-4f471a21 data-v-f41bc5f1><a class="VPLink link" href="/blog/" data-v-f41bc5f1 data-v-390ea14c><!--[-->Blog Home<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4f471a21 data-v-f41bc5f1><a class="VPLink link" href="/blog/tags.html" data-v-f41bc5f1 data-v-390ea14c><!--[-->Tags<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4f471a21 data-v-f41bc5f1><a class="VPLink link" href="/blog/archives.html" data-v-f41bc5f1 data-v-390ea14c><!--[-->Archives<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-70adf6b5 data-v-7a8f8935><label title="toggle dark mode" data-v-7a8f8935 data-v-b6ab651e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-b6ab651e data-v-c8b4d4cf><span class="check" data-v-c8b4d4cf><span class="icon" data-v-c8b4d4cf><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-b6ab651e><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-b6ab651e><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-70adf6b5 data-v-7d9f08cb data-v-37dff3b8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-37dff3b8><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-37dff3b8><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-37dff3b8><div class="VPMenu" data-v-37dff3b8 data-v-4f471a21><!----><!--[--><!--[--><!----><div class="group" data-v-7d9f08cb><div class="item appearance" data-v-7d9f08cb><p class="label" data-v-7d9f08cb>Appearance</p><div class="appearance-action" data-v-7d9f08cb><label title="toggle dark mode" data-v-7d9f08cb data-v-b6ab651e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-b6ab651e data-v-c8b4d4cf><span class="check" data-v-c8b4d4cf><span class="icon" data-v-c8b4d4cf><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-b6ab651e><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-b6ab651e><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-70adf6b5 data-v-cba97204><span class="container" data-v-cba97204><span class="top" data-v-cba97204></span><span class="middle" data-v-cba97204></span><span class="bottom" data-v-cba97204></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-56839c3d data-v-049ec038><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-049ec038 data-v-f8751f8e><button data-v-f8751f8e>Return to top</button><!----></div></div><!----><div class="VPContent" id="VPContent" data-v-56839c3d data-v-baf0af1a><div class="VPDoc has-aside" data-v-baf0af1a data-v-abdcb82b><!--[--><!--]--><div class="container" data-v-abdcb82b><div class="left-aside aside" data-v-abdcb82b><div class="aside-curtain" data-v-abdcb82b></div><div class="aside-container" data-v-abdcb82b><div class="aside-content" data-v-abdcb82b><div class="VPDocAside" data-v-abdcb82b data-v-7dd2b804><!--[--><!--[--><!--[--><!--[--><!--[--><span class="bg-primary-100 inline-flex items-center rounded text-sm font-medium"><div data-v-262d93ff><div class="i-[heroicons-outline/book-open] mr-2" data-v-262d93ff></div><span data-v-262d93ff>Article</span></div></span><span class="bg-primary-100 inline-flex rounded text-sm font-medium"><div class="flex flex-wrap gap-2 py-5"><!--[--><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=data"><!----> data</a><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=orchestrator"><!----> orchestrator</a><!--]--></div></span><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 dark:xl:border-slate-200/5" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Authors</dt><dd data-v-f51709bc><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8" data-v-f51709bc><li class="flex items-center space-x-2" data-v-f51709bc><img src="https://gravatar.com/avatar/4f70a53dd35d6ef71c47711614e1b40a" alt="author image" class="h-10 w-10 rounded-full" data-v-f51709bc><dl class="whitespace-nowrap text-sm font-medium leading-5" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Name</dt><dd class="text-gray-900 dark:text-white" data-v-f51709bc><a href="/blog/authors/martin-erpicum.html" class="text-lg text-gray-900 hover:text-[color:var(--vp-c-brand-light)] dark:text-white dark:hover:text-[color:var(--vp-c-brand-dark)]" data-v-f51709bc>Martin Erpicum</a></dd><!----><!----></dl></li></ul></dd></dl><!--]--><!--]--><!--]--><!--]--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-7dd2b804 data-v-a96026ac><div class="content" data-v-a96026ac><div class="outline-marker" data-v-a96026ac></div><div class="outline-title" data-v-a96026ac>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-a96026ac><span class="visually-hidden" id="doc-outline-aria-label" data-v-a96026ac> Table of Contents for current page </span><ul class="root" data-v-a96026ac data-v-f60dfdf1><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-7dd2b804></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><footer class="mb-24 divide-y divide-gray-200 text-sm font-medium leading-5 dark:divide-slate-200/5" data-v-2f3a5683><div class="py-3" data-v-2f3a5683><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-white" data-v-2f3a5683> Next Article </h2><div class="link" data-v-2f3a5683><a href="/blog/posts/2025/data_platform_in_fwb_00_intro.html" data-v-2f3a5683>Data Platform in a polycephalous organization - Part 1: Overview</a></div></div><div class="py-3" data-v-2f3a5683><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-white" data-v-2f3a5683> Previous Article </h2><div class="link" data-v-2f3a5683><a href="/blog/posts/2025/how-to-reuse-a-calendar.html" data-v-2f3a5683>Comment savoir si on peut réutiliser un calendrier pour une année donnée en SQL ?</a></div></div><div class="pt-3" data-v-2f3a5683><a class="link" href="/blog/" data-v-2f3a5683>← Back to the blog</a></div></footer><!----><!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-abdcb82b><div class="content-container" data-v-abdcb82b><!--[--><!--[--><!--[--><!--[--><header class="space-y-1 pt-6 text-center xl:pb-10"><dl><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-300"><time datetime="2025-04-03T12:00:00.000Z">April 3, 2025</time></dd></dl><h1 class="md:leading-14 text-3xl font-extrabold leading-9 tracking-tight text-[color:var(--vp-c-brand-dark)] dark:text-[color:var(--vp-c-brand-light)] sm:text-4xl sm:leading-10 md:text-5xl">Data Platform - Part 2: Automate everything</h1></header><!--[--><div class="xs:show xl:hidden flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><span class="bg-primary-100 inline-flex items-center rounded text-sm font-medium"><div data-v-262d93ff><div class="i-[heroicons-outline/book-open] mr-2" data-v-262d93ff></div><span data-v-262d93ff>Article</span></div></span></div><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 dark:xl:border-slate-200/5 xs:show xl:hidden" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Authors</dt><dd data-v-f51709bc><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8" data-v-f51709bc><li class="flex items-center space-x-2" data-v-f51709bc><img src="https://gravatar.com/avatar/4f70a53dd35d6ef71c47711614e1b40a" alt="author image" class="h-10 w-10 rounded-full" data-v-f51709bc><dl class="whitespace-nowrap text-sm font-medium leading-5" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Name</dt><dd class="text-gray-900 dark:text-white" data-v-f51709bc><a href="/blog/authors/martin-erpicum.html" class="text-lg text-gray-900 hover:text-[color:var(--vp-c-brand-light)] dark:text-white dark:hover:text-[color:var(--vp-c-brand-dark)]" data-v-f51709bc>Martin Erpicum</a></dd><!----><!----></dl></li></ul></dd></dl><!--]--><!--]--><!----><!--]--><!--]--><!--]--><!----><main class="main" data-v-abdcb82b><div style="position:relative;" class="vp-doc _blog_posts_2025_data_platform_in_fwb_01_automate" data-v-abdcb82b><div><p><em>Executive summary</em>: In a polycephalous organization, Data Governance is a complex challenge. This article explores the implementation of a Data Platform based on <a href="https://dagster.io/" target="_blank" rel="noreferrer">Dagster</a> for the <a href="https://www.federation-wallonie-bruxelles.be" target="_blank" rel="noreferrer">Fédération Wallonie-Bruxelles (FWB)</a>. It highlights the importance of automatisation, modularity and components reusability to lower the technical barrier and improve the data literacy among data analysts and data stewards.</p><hr><p><em>The views expressed on this website are my own and do not necessarily reflect the views of my employer.</em></p><p><strong>Table of contents</strong></p><nav class="table-of-contents"><ul><li><a href="#architecture-of-our-data-platform">Architecture of our Data Platform</a><ul><li><a href="#code-locations-structure">Code locations structure</a></li></ul></li><li><a href="#automate-ci-cd">Automate CI/CD</a><ul><li><a href="#ci-cd-flow">CI/CD flow</a></li><li><a href="#our-deployment-setup">Our deployment setup</a></li><li><a href="#automate-integration-of-dbt">Automate integration of DBT</a></li></ul></li><li><a href="#automate-observability">Automate observability</a></li><li><a href="#conclusion">Conclusion</a></li></ul></nav><p>If you want to encourage data analysts and data stewards to participate in the development of data pipelines, you need to be sure every commit is tested and validated before being deployed to production. You also want to automate repetitive tasks to reduce the technical barrier as much as possible.</p><p>To explain how we automate the deployment of data pipelines, I will first describe the architecture of our data platform.</p><h2 id="architecture-of-our-data-platform" tabindex="-1">Architecture of our Data Platform <a class="header-anchor" href="#architecture-of-our-data-platform" aria-label="Permalink to &quot;Architecture of our Data Platform&quot;">​</a></h2><p>Our stack is currently based on the following components:</p><ul><li><strong>Dagster</strong>: The orchestrator of our data pipelines. It allows us to define, schedule, and monitor our data workflows.</li><li><strong>dbt-core</strong>: The data transformation tool that allows us to define our data models and transformations in a modular way. It is used to build the data models and transformations that are executed by Dagster.</li><li><strong>DuckDB</strong>: The sql engine that allows us to run SQL queries on our data. It is used for local development and testing of our data pipelines.</li><li><strong>Azure</strong>: The cloud provider that hosts our data platform. We use Azure Data Lake Storage (ADLS) for data storage.</li><li><strong>Docker</strong>: The containerization technology that allows us to package our data pipelines and their dependencies in a portable way.</li><li><strong>GitLab</strong>: The version control system that allows us to manage our code repositories and automate our CI/CD pipelines.</li></ul><div align="center" class=""><img src="/assets/diagrams/fwb_tech_stack.drawio.svg" alt="" width="600" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400"></span></div></div><div align="center" class=""><img src="/assets/diagrams/data_platform.drawio.svg" alt="" width="600" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400"></span></div></div><p>One important side note here, our technical choices are not set in stone. We are constantly evaluating new technologies and approaches to improve our data platform. The goal is to provide a flexible and scalable architecture that can adapt to the changing needs of the organization. If <code>dbt-core</code>, <code>Dagster</code>, or any other tool/provider does not fit our needs anymore, we will not hesitate to change it. What we are really binding ourselves to is the (1) <strong>architecture</strong>, and the (2) <strong>languages</strong> we use to implement it (Python, SQL). The tools and providers are just means to an end.</p><p>For excellent recommendations on how to build a solid data platform, I recommend reading <a href="https://www.oreilly.com/library/view/fundamentals-of-data/9781098108298/" target="_blank" rel="noreferrer">Fundamentals of Data Engineering</a> by by Joe Reis, Matt Housley</p><h3 id="code-locations-structure" tabindex="-1">Code locations structure <a class="header-anchor" href="#code-locations-structure" aria-label="Permalink to &quot;Code locations structure&quot;">​</a></h3><p>To allow each administration générale (AG) to own its repository (a <strong>code location</strong> in Dagster vocabulary) -- which contains the Dagster code location for the data pipelines of that AG -- we decided to <strong>mirror the organizational structure of the FWB into the architecture of our data platform</strong>. We also use distinct code locations for specific projects that are not tied to a specific AG. This allows each AG to manage its own data pipelines independently and have a clear ownership of the code. The code locations are then aggregated into a single Dagster instance, which is the data platform.</p><h4 id="structure-of-our-code-locations-folder" tabindex="-1">Structure of our code locations folder <a class="header-anchor" href="#structure-of-our-code-locations-folder" aria-label="Permalink to &quot;Structure of our code locations folder&quot;">​</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">dagster_home</span><span style="color:#BABED8;"> (main) $ tree -L 1</span></span>
<span class="line"><span style="color:#82AAFF;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">├──</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ags_project</span></span>
<span class="line"><span style="color:#FFCB6B;">├──</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">agaj_project</span></span>
<span class="line"><span style="color:#82AAFF;">...</span></span>
<span class="line"><span style="color:#FFCB6B;">├──</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">data_platform</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;"># our generic code location</span></span>
<span class="line"><span style="color:#FFCB6B;">├──</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dagster.yaml</span></span>
<span class="line"><span style="color:#FFCB6B;">└──</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">workspace.yaml</span></span></code></pre></div><h2 id="automate-ci-cd" tabindex="-1">Automate CI/CD <a class="header-anchor" href="#automate-ci-cd" aria-label="Permalink to &quot;Automate CI/CD&quot;">​</a></h2><h3 id="ci-cd-flow" tabindex="-1">CI/CD flow <a class="header-anchor" href="#ci-cd-flow" aria-label="Permalink to &quot;CI/CD flow&quot;">​</a></h3><p>Our deployment setup is based on GitLab CI/CD pipelines. The flow is as follows:</p><ol start="0"><li><strong>Submodules integration</strong>: DBT project are integrated as a Git submodule in the main repository. This allows us to include the work of data stewards and analysts in the data platform without having to duplicate code or maintain separate repositories.</li><li><strong>Build</strong>: The code is built and packaged into a Docker image, the same image is used for Webserver, Daemon and Code locations.</li><li><strong>Validate definitions</strong>: The Dagster definitions are validated to ensure they are correct and do not contain any errors.</li><li><strong>Ruff</strong>: The code is checked for style and formatting issues using Ruff.</li><li><strong>Sonar</strong>: The code is analyzed for quality and security issues using <a href="https://www.sonarqube.org/" target="_blank" rel="noreferrer">SonarQube</a>.</li><li><strong>Test</strong>: The code is tested using <a href="https://docs.pytest.org/en/stable/" target="_blank" rel="noreferrer">pytest</a> both for unit tests, integration tests, and coverage analysis.</li><li><strong>Deploy to dev</strong>: The code is deployed to the development environment for each commit in the main branch or feature branch.</li><li><strong>Release</strong>: A new release is created in GitLab, a tag and un changelog are generated.</li><li><strong>Deploy to prod</strong>: The code is deployed to the production environment.</li></ol><div align="center" class=""><img src="/assets/diagrams/dagster_flow_stack.drawio.svg" alt="" width="800" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400"></span></div></div><p>Below is an example of how we implement this flow in our <code>.gitlab-ci.yml</code> file.</p><h4 id="validate-definitions" tabindex="-1">Validate definitions <a class="header-anchor" href="#validate-definitions" aria-label="Permalink to &quot;Validate definitions&quot;">​</a></h4><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight has-focused-lines"><code><span class="line"><span style="color:#676E95;font-style:italic;"># .gitlab-ci.yml</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#F07178;">validate_definitions</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">analyse</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">allow_failure</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">needs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">gitlab.*/*/dagster:latest</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">cd /opt/dagster/dagster_home</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">rm dagster.yaml</span></span>
<span class="line has-focus"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dagster definitions validate -d code_location_1 -m code_location_1</span><span style="color:#BABED8;"> </span></span>
<span class="line has-focus"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dagster definitions validate -d code_location_2 -m code_location_2</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">...</span></span></code></pre></div><h4 id="sonar" tabindex="-1">Sonar <a class="header-anchor" href="#sonar" aria-label="Permalink to &quot;Sonar&quot;">​</a></h4><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight has-focused-lines"><code><span class="line"><span style="color:#676E95;font-style:italic;"># .gitlab-ci.yml</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#F07178;">sonarqube</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">SONAR_SCANNER_OPTS=&quot;${SONAR_SCANNER_OPTS} -Dsonar.exclusions=**/dbt_packages/**,**/dbt-*/**/*.sql,**/dbt-*/**/*.py&quot;</span></span>
<span class="line has-focus"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">sonar-scanner</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span></code></pre></div><h4 id="pytest-and-coverage-analysis" tabindex="-1">Pytest and coverage analysis <a class="header-anchor" href="#pytest-and-coverage-analysis" aria-label="Permalink to &quot;Pytest and coverage analysis&quot;">​</a></h4><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight has-focused-lines"><code><span class="line"><span style="color:#676E95;font-style:italic;"># .gitlab-ci.yml</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">test</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line has-focus"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uv run coverage run -m pytest --tb=no</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uv run coverage xml -o coverage-reports/coverage.xml</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">uv run coverage report -m</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">coverage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/TOTAL</span><span style="color:#BABED8;">\\</span><span style="color:#C3E88D;">s+.*?([0-9]{1,3})%/</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span></code></pre></div><h3 id="our-deployment-setup" tabindex="-1">Our deployment setup <a class="header-anchor" href="#our-deployment-setup" aria-label="Permalink to &quot;Our deployment setup&quot;">​</a></h3><p>Once deployed, the data platform is composed of the following containerized components:</p><ul><li>A <strong>postgresql</strong> database to store the Dagster data.</li><li>A <strong>webserver</strong> to provide the UI and API for the data platform.</li><li>A <strong>daemon</strong> to monitor the code and communicate with the code locations and the webserver.</li><li>And a <strong>code location</strong> for each AG or specific project.</li></ul><div align="center" class=""><img src="/assets/diagrams/dagster_stack.drawio.svg" alt="" width="800" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400"></span></div></div><h3 id="automate-integration-of-dbt" tabindex="-1">Automate integration of DBT <a class="header-anchor" href="#automate-integration-of-dbt" aria-label="Permalink to &quot;Automate integration of DBT&quot;">​</a></h3><p>We created a <strong>specific release cycle</strong> of our DBT projects. This allows us to include the work of data stewards and analysts in the data platform while giving them the full autonomy to develop their data models, transformations and quality monitoring. The DBT projects are integrated as <strong>Git submodules</strong> in the main repository of the data platform.</p><div align="center" class=""><img src="https://raw.githubusercontent.com/data-cfwb/charte-graphique/refs/heads/main/custom_css/data_dbt.png" alt="" width="300" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400"></span></div></div><p>For each commit in the main branch of the DBT project, models are analysed by sqlfluff, a gitlab page is published with the documentation of the DBT project that include the data models, the tests, and the documentation of the data models. This allows us to have a clear overview of the data models and their dependencies and allow analyst to share this documentation with their colleagues.</p><p>When a new release is created, the DBT project is automatically versioned using the <code>release</code> tool. The version is bumped and a changelog is generated. The DBT project is then parsed using <code>dbt parse</code> to produce the <code>manifest.json</code> file, which contains the metadata of the DBT project. This file is used by Dagster to discover the DBT models and their dependencies.</p><h4 id="the-release-cycle-of-our-dbt-projects-consists-of-the-following-steps" tabindex="-1">The release cycle of our DBT projects consists of the following steps: <a class="header-anchor" href="#the-release-cycle-of-our-dbt-projects-consists-of-the-following-steps" aria-label="Permalink to &quot;The release cycle of our DBT projects consists of the following steps:&quot;">​</a></h4><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight has-focused-lines has-diff"><code><span class="line"><span style="color:#676E95;font-style:italic;"># .gitlab-ci.yml</span></span>
<span class="line"><span style="color:#F07178;">sqlfluff</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">test</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">allow_failure</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">gitlab.**.com/**:stable</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">echo &quot;Running SQLFluff linting...&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">sqlfluff lint models</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#F07178;">dbt_parse</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">test</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">gitlab.**.com/**:stable</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dbt deps</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dbt parse</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">release</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">variables</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">FILETOCHANGE</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">${CI_PROJECT_DIR}/${DBT_PATH}/dbt_project.yml</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">GSG_BUMP_PATCH</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">VERSION=$(release next-version)</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">|</span></span>
<span class="line"><span style="color:#C3E88D;">      sed -i &quot;s/version: \&quot;[^\&quot;]*\&quot;/version: \&quot;$VERSION\&quot;/&quot; &quot;$FILETOCHANGE&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">release changelog</span></span>
<span class="line has-focus"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">release commit-and-tag --create-tag-pipeline CHANGELOG.md ${DBT_PATH}/dbt_project.yml</span><span style="color:#BABED8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">dagster_submodule</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">if</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">$CI_COMMIT_TAG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">gitlab.**.com/**:stable</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># Initialize the dbt project</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dbt deps</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dbt parse</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">mv logs/dbt.log logs/dbt_init_parse.log</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># Add and commit the changes if there are any</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">git add .</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">git diff --cached --quiet || git commit -m &quot;Update dbt submodule&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># Push changes without forcing deletion</span></span>
<span class="line has-focus"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">git push origin dagster_submodule</span><span style="color:#BABED8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># This step publish a artifact for DBT docs.</span></span>
<span class="line"><span style="color:#F07178;">pages</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dbt_docs</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">only</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">main</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">gitlab.**.com/**:stable</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dbt deps</span></span>
<span class="line has-focus"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dbt docs generate</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#F07178;">artifacts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">paths</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">public</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">notify-teams-markdown</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">notify</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">if</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">$CI_COMMIT_TAG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">extends</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">.msteamsMarkdownNotification</span></span></code></pre></div><h2 id="automate-observability" tabindex="-1">Automate observability <a class="header-anchor" href="#automate-observability" aria-label="Permalink to &quot;Automate observability&quot;">​</a></h2><p>The observability of our data platform is a key aspect of the implementation of a Data Platform. It allows us to monitor the health of our data pipelines, detect issues early, and ensure the quality of our data.</p><div align="center" class=""><img src="https://raw.githubusercontent.com/tintamarre/tintamarre.github.io/refs/heads/master/src/assets/images/250px-Panopticon.jpg" alt="" width="200" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400"></span></div></div><p>Acting like a <strong>centralized observability hub</strong>, we use webhooks to send notifications (Throught MS Teams, NTFY or Email). This allows us to have a clear overview of the status of our data pipelines and the health of our data platform.</p><div align="center" class=""><img src="https://raw.githubusercontent.com/tintamarre/tintamarre.github.io/refs/heads/master/src/assets/images/ms-team-panopticon.png" alt="" width="600" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400"></span></div></div><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">​</a></h2><p>In this article, we have explored how to automate the deployment of data pipelines in a polycephalous organization like the FWB. We have seen how to use Dagster as an orchestrator, dbt-core for data transformations, and GitLab CI/CD for automating the deployment process.</p><p>We have also discussed the importance of modularity and reusability of components to lower the technical barrier for data analysts and data stewards. By automating the deployment process, we can ensure that every commit is tested and validated before being deployed to production, which encourages participation from data analysts and data stewards in the development of data pipelines.</p><p>But as stated in the introduction, the level of participation is inversely proportional to the technical barrier. The more complex the setup, the less likely data analysts and data stewards will participate in the development of data pipelines.</p><p>In the next article, we will explore how to lower the technical barrier even further by providing a user-friendly interface for data analysts and data stewards to interact with the data platform. We will also discuss how to improve the data literacy among data analysts and data stewards to encourage them to participate in the development of data pipelines.</p></div></div></main><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-56839c3d data-v-9d18c063><div class="container" data-v-9d18c063><p class="message" data-v-9d18c063>Made with ❤️</p><p class="copyright" data-v-9d18c063>WTFPL License | <a href="https://github.com/tintamarre/tintamarre.github.io">Source code</a></p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"blog_authors_martin-erpicum.md\":\"d9b5e319\",\"blog__partials_basics.md\":\"5f9f9a04\",\"blog_archives.md\":\"d799098c\",\"blog_index.md\":\"6392e082\",\"blog_posts_2025_dagster-case-study.md\":\"0a50f63a\",\"index.md\":\"452b5526\",\"theme-test.md\":\"b8eccb37\",\"assets_datasets_bestaddress_vld.md\":\"2ca47eb9\",\"blog_posts_2024_address_lookup-part1-problematic.md\":\"cd46669b\",\"assets_datasets_bestaddress_bxl.md\":\"610719ff\",\"blog_posts_2025_data_platform_in_fwb_01_automate.md\":\"21746e48\",\"blog_posts_2025_data_platform_in_fwb_00_intro.md\":\"7ff312ca\",\"blog_posts_2025_address_lookup-part3-api.md\":\"1ed87d26\",\"blog_posts_2024_address_lookup-part2-sourcing.md\":\"6bb1f560\",\"blog_posts_2024_address_lookup-part2b-messing-around.md\":\"d6dc6bce\",\"blog_posts_2024_tax_brackets_proposition.md\":\"29982599\",\"blog_posts_2024_hello_world.md\":\"9eebf99e\",\"blog_posts_2025_how-to-reuse-a-calendar.md\":\"b4d86129\",\"assets_datasets_bestaddress_wal.md\":\"444d2747\",\"blog_tags.md\":\"d70481fd\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Tintamarre\",\"description\":\"Personal blog of Martin Erpicum\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"blog\":{\"title\":\"\",\"description\":\"Some thoughts\",\"defaultAuthor\":\"Martin Erpicum\",\"categoryIcons\":{\"article\":\"i-[heroicons-outline/book-open]\",\"tutorial\":\"i-[heroicons-outline/academic-cap]\",\"document\":\"i-[heroicons-outline/annotation]\",\"experimentation\":\"i-[heroicons-outline/beaker]\"},\"tagIcons\":{\"github\":\"i-[carbon/logo-github]\",\"vue\":\"i-[carbon/logo-vue]\"}},\"footer\":{\"message\":\"Made with ❤️\",\"copyright\":\"WTFPL License | <a href=\\\"https://github.com/tintamarre/tintamarre.github.io\\\">Source code</a>\"},\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Blog\",\"items\":[{\"text\":\"Blog Home\",\"link\":\"/blog/\",\"activeMatch\":\"/blog/$\"},{\"text\":\"Tags\",\"link\":\"/blog/tags\",\"activeMatch\":\"/blog/tags\"},{\"text\":\"Archives\",\"link\":\"/blog/archives\",\"activeMatch\":\"/blog/archives\"}]}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>