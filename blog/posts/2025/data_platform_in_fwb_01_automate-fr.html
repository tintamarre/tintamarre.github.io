<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Plateforme de donn√©es - Partie 2 : Automatiser tout ü§ñ | Tintamarre</title>
    <meta name="description" content="Personal blog of Martin Erpicum">
    <link rel="preload stylesheet" href="/assets/style.7c680449.css" as="style">
    <script type="module" src="/assets/app.2cc6cb11.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/assets/chunks/framework.ad705b6b.js">
  <link rel="modulepreload" href="/assets/chunks/theme.75e59a9b.js">
  <link rel="modulepreload" href="/assets/blog_posts_2025_data_platform_in_fwb_01_automate-fr.md.40533231.lean.js">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-56839c3d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9eb42e17></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9eb42e17> Skip to content </a><!--]--><!----><header class="VPNav" data-v-56839c3d data-v-8246f099><div class="VPNavBar" data-v-8246f099 data-v-70adf6b5><div class="container" data-v-70adf6b5><div class="title" data-v-70adf6b5><div class="VPNavBarTitle" data-v-70adf6b5 data-v-8e118abc><a class="title" href="/" data-v-8e118abc><!--[--><!--]--><!----><!--[-->Tintamarre<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-70adf6b5><div class="curtain" data-v-70adf6b5></div><div class="content-body" data-v-70adf6b5><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-70adf6b5><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-70adf6b5 data-v-1419bb5f><span id="main-nav-aria-label" class="visually-hidden" data-v-1419bb5f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-1419bb5f data-v-58627f5e data-v-390ea14c><!--[-->Home<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-1419bb5f data-v-37dff3b8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-37dff3b8><span class="text" data-v-37dff3b8><!----> Blog <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-37dff3b8><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-37dff3b8><div class="VPMenu" data-v-37dff3b8 data-v-4f471a21><div class="items" data-v-4f471a21><!--[--><!--[--><div class="VPMenuLink" data-v-4f471a21 data-v-f41bc5f1><a class="VPLink link" href="/blog/" data-v-f41bc5f1 data-v-390ea14c><!--[-->Blog Home<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4f471a21 data-v-f41bc5f1><a class="VPLink link" href="/blog/tags.html" data-v-f41bc5f1 data-v-390ea14c><!--[-->Tags<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4f471a21 data-v-f41bc5f1><a class="VPLink link" href="/blog/archives.html" data-v-f41bc5f1 data-v-390ea14c><!--[-->Archives<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-70adf6b5 data-v-7a8f8935><label title="toggle dark mode" data-v-7a8f8935 data-v-b6ab651e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-b6ab651e data-v-c8b4d4cf><span class="check" data-v-c8b4d4cf><span class="icon" data-v-c8b4d4cf><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-b6ab651e><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-b6ab651e><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-70adf6b5 data-v-7d9f08cb data-v-37dff3b8><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-37dff3b8><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-37dff3b8><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-37dff3b8><div class="VPMenu" data-v-37dff3b8 data-v-4f471a21><!----><!--[--><!--[--><!----><div class="group" data-v-7d9f08cb><div class="item appearance" data-v-7d9f08cb><p class="label" data-v-7d9f08cb>Appearance</p><div class="appearance-action" data-v-7d9f08cb><label title="toggle dark mode" data-v-7d9f08cb data-v-b6ab651e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-b6ab651e data-v-c8b4d4cf><span class="check" data-v-c8b4d4cf><span class="icon" data-v-c8b4d4cf><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-b6ab651e><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-b6ab651e><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-70adf6b5 data-v-cba97204><span class="container" data-v-cba97204><span class="top" data-v-cba97204></span><span class="middle" data-v-cba97204></span><span class="bottom" data-v-cba97204></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-56839c3d data-v-049ec038><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-049ec038 data-v-f8751f8e><button data-v-f8751f8e>Return to top</button><!----></div></div><!----><div class="VPContent" id="VPContent" data-v-56839c3d data-v-baf0af1a><div class="VPDoc has-aside" data-v-baf0af1a data-v-abdcb82b><!--[--><!--]--><div class="container" data-v-abdcb82b><div class="left-aside aside" data-v-abdcb82b><div class="aside-curtain" data-v-abdcb82b></div><div class="aside-container" data-v-abdcb82b><div class="aside-content" data-v-abdcb82b><div class="VPDocAside" data-v-abdcb82b data-v-7dd2b804><!--[--><!--[--><!--[--><!--[--><!--[--><span class="bg-primary-100 inline-flex items-center rounded text-sm font-medium"><div data-v-262d93ff><div class="i-[heroicons-outline/book-open] mr-2" data-v-262d93ff></div><span data-v-262d93ff>Article</span></div></span><span class="bg-primary-100 inline-flex rounded text-sm font-medium"><div class="flex flex-wrap gap-2 py-5"><!--[--><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=data"><!----> data</a><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=orchestrator"><!----> orchestrator</a><!--]--></div></span><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 dark:xl:border-slate-200/5" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Authors</dt><dd data-v-f51709bc><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8" data-v-f51709bc><li class="flex items-center space-x-2" data-v-f51709bc><img src="https://gravatar.com/avatar/4f70a53dd35d6ef71c47711614e1b40a" alt="author image" class="h-10 w-10 rounded-full" data-v-f51709bc><dl class="whitespace-nowrap text-sm font-medium leading-5" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Name</dt><dd class="text-gray-900 dark:text-white" data-v-f51709bc><a href="/blog/authors/martin-erpicum.html" class="text-lg text-gray-900 hover:text-[color:var(--vp-c-brand-light)] dark:text-white dark:hover:text-[color:var(--vp-c-brand-dark)]" data-v-f51709bc>Martin Erpicum</a></dd><!----><!----></dl></li></ul></dd></dl><!--]--><!--]--><!--]--><!--]--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-7dd2b804 data-v-a96026ac><div class="content" data-v-a96026ac><div class="outline-marker" data-v-a96026ac></div><div class="outline-title" data-v-a96026ac>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-a96026ac><span class="visually-hidden" id="doc-outline-aria-label" data-v-a96026ac> Table of Contents for current page </span><ul class="root" data-v-a96026ac data-v-f60dfdf1><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-7dd2b804></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><footer class="mb-24 divide-y divide-gray-200 text-sm font-medium leading-5 dark:divide-slate-200/5" data-v-2f3a5683><div class="py-3" data-v-2f3a5683><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-white" data-v-2f3a5683> Next Article </h2><div class="link" data-v-2f3a5683><a href="/blog/posts/2025/data_platform_in_fwb_02_lower_barrier.html" data-v-2f3a5683>Data Platform - Part 3: Lower the barrier üöß</a></div></div><div class="py-3" data-v-2f3a5683><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-white" data-v-2f3a5683> Previous Article </h2><div class="link" data-v-2f3a5683><a href="/blog/posts/2025/data_platform_in_fwb_01_automate.html" data-v-2f3a5683>Data Platform - Part 2: Automate everything ü§ñ</a></div></div><div class="pt-3" data-v-2f3a5683><a class="link" href="/blog/" data-v-2f3a5683>‚Üê Back to the blog</a></div></footer><!----><!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-abdcb82b><div class="content-container" data-v-abdcb82b><!--[--><!--[--><!--[--><!--[--><header class="space-y-1 pt-6 text-center xl:pb-10"><dl><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-300"><time datetime="2025-07-03T12:00:00.000Z">July 3, 2025</time></dd></dl><h1 class="md:leading-14 text-3xl font-extrabold leading-9 tracking-tight text-[color:var(--vp-c-brand-dark)] dark:text-[color:var(--vp-c-brand-light)] sm:text-4xl sm:leading-10 md:text-5xl">Plateforme de donn√©es - Partie 2 : Automatiser tout ü§ñ</h1></header><!--[--><div class="xs:show xl:hidden flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><span class="bg-primary-100 inline-flex items-center rounded text-sm font-medium"><div data-v-262d93ff><div class="i-[heroicons-outline/book-open] mr-2" data-v-262d93ff></div><span data-v-262d93ff>Article</span></div></span></div><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 dark:xl:border-slate-200/5 xs:show xl:hidden" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Authors</dt><dd data-v-f51709bc><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8" data-v-f51709bc><li class="flex items-center space-x-2" data-v-f51709bc><img src="https://gravatar.com/avatar/4f70a53dd35d6ef71c47711614e1b40a" alt="author image" class="h-10 w-10 rounded-full" data-v-f51709bc><dl class="whitespace-nowrap text-sm font-medium leading-5" data-v-f51709bc><dt class="sr-only" data-v-f51709bc>Name</dt><dd class="text-gray-900 dark:text-white" data-v-f51709bc><a href="/blog/authors/martin-erpicum.html" class="text-lg text-gray-900 hover:text-[color:var(--vp-c-brand-light)] dark:text-white dark:hover:text-[color:var(--vp-c-brand-dark)]" data-v-f51709bc>Martin Erpicum</a></dd><!----><!----></dl></li></ul></dd></dl><!--]--><!--]--><!----><!--]--><!--]--><!--]--><!----><main class="main" data-v-abdcb82b><div style="position:relative;" class="vp-doc _blog_posts_2025_data_platform_in_fwb_01_automate-fr" data-v-abdcb82b><div><p><em>R√©sum√© ex√©cutif</em> : Dans une organisation polyc√©phale, la Gouvernance des Donn√©es est un d√©fi complexe. Cet article explore la mise en ≈ìuvre d&#39;une Plateforme de Donn√©es bas√©e sur <a href="https://dagster.io/" target="_blank" rel="noreferrer">Dagster</a> pour la <a href="https://www.federation-wallonie-bruxelles.be" target="_blank" rel="noreferrer">F√©d√©ration Wallonie-Bruxelles (FWB)</a>. Il met en √©vidence l&#39;importance de l&#39;automatisation, de la modularit√© et de la r√©utilisabilit√© des composants pour abaisser la barri√®re technique et am√©liorer la litt√©ratie des donn√©es parmi les analystes de donn√©es et les gestionnaires de donn√©es.</p><hr><p><em>Les opinions exprim√©es sur ce site web sont les miennes et ne refl√®tent pas n√©cessairement celles de mon employeur.</em></p><p><strong>Table des mati√®res</strong></p><nav class="table-of-contents"><ul><li><a href="#üèóÔ∏è-architecture-technique-de-notre-plateforme-de-donnees">üèóÔ∏è Architecture technique de notre plateforme de donn√©es</a><ul><li><a href="#structure-des-emplacements-de-code">Structure des emplacements de code</a></li></ul></li><li><a href="#ü§ñ-automatiser-le-ci-cd">ü§ñ Automatiser le CI/CD</a><ul><li><a href="#flux-ci-cd">Flux CI/CD</a></li><li><a href="#etapes-ci-cd-de-notre-plateforme-de-donnees">√âtapes CI/CD de notre plateforme de donn√©es</a></li><li><a href="#specificites-des-environnements">Sp√©cificit√©s des environnements</a></li></ul></li><li><a href="#ü§ñ-automatiser-les-tests">ü§ñ Automatiser les tests</a></li><li><a href="#üöÄ-automatiser-le-deploiement">üöÄ Automatiser le d√©ploiement</a><ul><li><a href="#cycle-de-deploiement-de-notre-plateforme-de-donnees">Cycle de d√©ploiement de notre plateforme de donn√©es</a></li><li><a href="#cycle-de-deploiement-de-nos-projets-dbt">Cycle de d√©ploiement de nos projets DBT</a></li></ul></li><li><a href="#üëÄ-automatiser-l-observabilite">üëÄ Automatiser l&#39;observabilit√©</a><ul><li><a href="#observabilite-de-notre-pile-conteneurs">Observabilit√© de notre pile (conteneurs)</a></li><li><a href="#observabilite-de-nos-pipelines-de-donnees">Observabilit√© de nos pipelines de donn√©es</a></li><li><a href="#observabilite-de-nos-donnees">Observabilit√© de nos donn√©es</a></li></ul></li></ul></nav><p>Si vous souhaitez encourager les analystes de donn√©es et les gestionnaires de donn√©es √† participer au d√©veloppement de pipelines de donn√©es, vous devez vous assurer que chaque commit est test√© et valid√© avant d&#39;√™tre d√©ploy√© en production. Vous voulez √©galement automatiser les t√¢ches r√©p√©titives pour r√©duire la barri√®re technique autant que possible. De plus, vous voulez mettre en place un syst√®me d&#39;observabilit√© solide pour surveiller la sant√© de vos syst√®mes et pipelines de donn√©es et d√©tecter les probl√®mes rapidement.</p><p>Pour expliquer comment nous automatisons le d√©ploiement des pipelines de donn√©es, je vais d&#39;abord d√©crire l&#39;architecture de notre plateforme de donn√©es.</p><h2 id="üèóÔ∏è-architecture-technique-de-notre-plateforme-de-donnees" tabindex="-1">üèóÔ∏è Architecture technique de notre plateforme de donn√©es <a class="header-anchor" href="#üèóÔ∏è-architecture-technique-de-notre-plateforme-de-donnees" aria-label="Permalink to &quot;üèóÔ∏è Architecture technique de notre plateforme de donn√©es&quot;">‚Äã</a></h2><p>Notre pile est actuellement bas√©e sur les composants suivants :</p><ul><li><strong>Dagster</strong> : L&#39;orchestrateur de nos pipelines de donn√©es. Il nous permet de d√©finir, planifier et surveiller nos workflows de donn√©es.</li><li><strong>dbt-core</strong> : L&#39;outil de transformation de donn√©es qui nous permet de d√©finir nos mod√®les et transformations de donn√©es de mani√®re modulaire. Il est utilis√© pour construire les mod√®les et transformations de donn√©es qui sont ex√©cut√©s par Dagster.</li><li><strong>DuckDB</strong> : Le moteur SQL qui nous permet d&#39;ex√©cuter des requ√™tes SQL sur nos donn√©es. Il est utilis√© pour le d√©veloppement et les tests locaux de nos pipelines de donn√©es.</li><li><strong>Azure</strong> : Le fournisseur cloud qui h√©berge notre plateforme de donn√©es. Nous utilisons Azure Data Lake Storage (ADLS) pour le stockage des donn√©es.</li><li><strong>Docker</strong> : La technologie de conteneurisation qui nous permet d&#39;empaqueter nos pipelines de donn√©es et leurs d√©pendances de mani√®re portable.</li><li><strong>GitLab</strong> : Le syst√®me de contr√¥le de version qui nous permet de g√©rer nos d√©p√¥ts de code et d&#39;automatiser nos pipelines CI/CD.</li></ul><div align="center" class=""><img src="https://raw.githubusercontent.com/tintamarre/tintamarre.github.io/refs/heads/master/src/assets/diagrams/data_platform.drawio.png" alt="Flux de donn√©es dans notre pile" width="600" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400">Flux de donn√©es dans notre pile</span></div></div><p>Une remarque importante ici : nos choix techniques ne sont pas grav√©s dans le marbre. Nous √©valuons constamment de nouvelles technologies et approches pour am√©liorer notre plateforme de donn√©es. L&#39;objectif est de fournir une architecture flexible et √©volutive qui peut s&#39;adapter aux besoins changeants de l&#39;organisation. Si <code>dbt-core</code>, <code>Dagster</code>, ou tout autre outil/fournisseur ne r√©pond plus √† nos besoins, nous n&#39;h√©siterons pas √† le changer. Ce √† quoi nous nous engageons vraiment, c&#39;est l&#39;(1) <strong>architecture</strong>, et les (2) <strong>langages</strong> que nous utilisons pour l&#39;impl√©menter (Python, SQL). Les outils et fournisseurs ne sont que des moyens pour atteindre un objectif.</p><p>Pour d&#39;excellentes recommandations sur la fa√ßon de construire une plateforme de donn√©es solide, je recommande de lire <a href="https://www.oreilly.com/library/view/fundamentals-of-data/9781098108298/" target="_blank" rel="noreferrer">Fundamentals of Data Engineering</a> de Joe Reis et Matt Housley.</p><h3 id="structure-des-emplacements-de-code" tabindex="-1">Structure des emplacements de code <a class="header-anchor" href="#structure-des-emplacements-de-code" aria-label="Permalink to &quot;Structure des emplacements de code&quot;">‚Äã</a></h3><p>Pour permettre √† chaque administration g√©n√©rale (AG) de poss√©der son propre d√©p√¥t (un <strong>code location</strong> dans le vocabulaire Dagster)‚Äîqui contient l&#39;emplacement de code Dagster pour les pipelines de donn√©es de cette AG‚Äînous avons d√©cid√© de <strong>refl√©ter la structure organisationnelle de la FWB dans l&#39;architecture de notre plateforme de donn√©es</strong>. Nous utilisons √©galement des emplacements de code distincts pour des projets sp√©cifiques qui ne sont pas li√©s √† une AG sp√©cifique. Cela permet √† chaque AG de g√©rer ses propres pipelines de donn√©es de mani√®re ind√©pendante et d&#39;avoir une propri√©t√© claire du code. Les emplacements de code sont ensuite agr√©g√©s dans une seule instance Dagster, qui est la plateforme de donn√©es.</p><h4 id="üóÇÔ∏è-structure-de-notre-dossier-d-emplacements-de-code" tabindex="-1">üóÇÔ∏è Structure de notre dossier d&#39;emplacements de code <a class="header-anchor" href="#üóÇÔ∏è-structure-de-notre-dossier-d-emplacements-de-code" aria-label="Permalink to &quot;üóÇÔ∏è Structure de notre dossier d&#39;emplacements de code&quot;">‚Äã</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">dagster_home</span><span style="color:#BABED8;"> (main) $ tree -L 1</span></span>
<span class="line"><span style="color:#82AAFF;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">‚îú‚îÄ‚îÄ</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ags_project</span></span>
<span class="line"><span style="color:#FFCB6B;">‚îú‚îÄ‚îÄ</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">agaj_project</span></span>
<span class="line"><span style="color:#82AAFF;">...</span></span>
<span class="line"><span style="color:#FFCB6B;">‚îú‚îÄ‚îÄ</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">data_platform</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;"># notre emplacement de code g√©n√©rique</span></span>
<span class="line"><span style="color:#FFCB6B;">‚îú‚îÄ‚îÄ</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dagster.yaml</span></span>
<span class="line"><span style="color:#FFCB6B;">‚îî‚îÄ‚îÄ</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">workspace.yaml</span></span></code></pre></div><h2 id="ü§ñ-automatiser-le-ci-cd" tabindex="-1">ü§ñ Automatiser le CI/CD <a class="header-anchor" href="#ü§ñ-automatiser-le-ci-cd" aria-label="Permalink to &quot;ü§ñ Automatiser le CI/CD&quot;">‚Äã</a></h2><h3 id="flux-ci-cd" tabindex="-1">Flux CI/CD <a class="header-anchor" href="#flux-ci-cd" aria-label="Permalink to &quot;Flux CI/CD&quot;">‚Äã</a></h3><p>Notre configuration de d√©ploiement est bas√©e sur les pipelines GitLab CI/CD. Le flux est le suivant :</p><ol start="0"><li><strong>Int√©gration des sous-modules</strong> : Les projets DBT sont int√©gr√©s comme un sous-module Git dans le d√©p√¥t principal. Cela nous permet d&#39;inclure le travail des gestionnaires de donn√©es et des analystes dans la plateforme de donn√©es sans avoir √† dupliquer le code ou √† maintenir des d√©p√¥ts s√©par√©s.</li><li><strong>Build</strong> : Le code est construit et empaquet√© dans une image Docker ; la m√™me image est utilis√©e pour le Webserver, le Daemon et les emplacements de code.</li><li><strong>Valider les d√©finitions</strong> : Les d√©finitions Dagster sont valid√©es pour s&#39;assurer qu&#39;elles sont correctes et ne contiennent aucune erreur.</li><li><strong>Ruff</strong> : Le code est v√©rifi√© pour les probl√®mes de style et de formatage √† l&#39;aide de <a href="https://docs.astral.sh/ruff/" target="_blank" rel="noreferrer">Ruff</a>.</li><li><strong>Sonar</strong> : Le code est analys√© pour les probl√®mes de qualit√© et de s√©curit√© √† l&#39;aide de <a href="https://www.sonarqube.org/" target="_blank" rel="noreferrer">SonarQube</a>.</li><li><strong>Test</strong> : Le code est test√© √† l&#39;aide de <a href="https://docs.pytest.org/en/stable/" target="_blank" rel="noreferrer">pytest</a> pour les tests unitaires, les tests d&#39;int√©gration et l&#39;analyse de couverture.</li><li><strong>D√©ployer en DEV</strong> : Le code est d√©ploy√© dans l&#39;environnement de d√©veloppement pour chaque commit dans la branche principale ou une branche de fonctionnalit√©.</li><li><strong>D√©ployer en STAGING</strong> : Lorsqu&#39;un tag est cr√©√©, le code est d√©ploy√© dans l&#39;environnement de staging.</li><li><strong>D√©ployer en PROD</strong> : Le code est d√©ploy√© dans l&#39;environnement de production apr√®s validation manuelle en staging.</li></ol><h3 id="etapes-ci-cd-de-notre-plateforme-de-donnees" tabindex="-1">√âtapes CI/CD de notre plateforme de donn√©es <a class="header-anchor" href="#etapes-ci-cd-de-notre-plateforme-de-donnees" aria-label="Permalink to &quot;√âtapes CI/CD de notre plateforme de donn√©es&quot;">‚Äã</a></h3><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight has-focused-lines"><code><span class="line"><span style="color:#676E95;font-style:italic;"># .gitlab-ci.yml (simplifi√©)</span></span>
<span class="line has-focus"><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">docker compose build</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#F07178;">validate</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">test</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dagster definitions validate -m data_platform</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">test</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">pytest -v</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#C3E88D;">--cov=. --cov-branch --cov-report=html --cov-report=term</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#C3E88D;">--cov-report xml:coverage.xml</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#C3E88D;">--junitxml=report.xml</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#F07178;">ruff</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">test</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ruff check --output-format=gitlab .</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#F07178;">sonarqube-check</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">test</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">sonar-scanner</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#F07178;">deploy_dev</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">deploy</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">only</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">main</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">docker compose up -d</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#F07178;">deploy_staging</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">deploy</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">only</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">tags</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">docker compose up -d</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#F07178;">deploy_prod</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">deploy</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">when</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">manual</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">only</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">tags</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">docker compose up -d</span></span></code></pre></div><h3 id="specificites-des-environnements" tabindex="-1">Sp√©cificit√©s des environnements <a class="header-anchor" href="#specificites-des-environnements" aria-label="Permalink to &quot;Sp√©cificit√©s des environnements&quot;">‚Äã</a></h3><p>Les environnements sont configur√©s dans le fichier <code>docker-compose.yml</code> √† l&#39;aide de variables d&#39;environnement. Chaque environnement a ses propres variables d&#39;environnement, qui sont utilis√©es pour configurer le comportement de la plateforme de donn√©es.</p><p>Nous utilisons un seul fichier <code>docker-compose.yml</code> dont le contenu peut √™tre adapt√© en fonction de l&#39;environnement. Le fichier compose contient tous les services n√©cessaires pour ex√©cuter la plateforme de donn√©es, y compris le webserver Dagster, le daemon Dagster et les emplacements de code Dagster.</p><p>Dans l&#39;exemple suivant, nous montrons comment nous utilisons le m√™me fichier compose pour d√©ployer la plateforme de donn√©es dans diff√©rents environnements en utilisant uniquement des variables d&#39;environnement :</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># docker-compose.yml (simplifi√©)</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.8</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">dagster_webserver</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">context</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">.</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">${DOCKER_IMAGE}:${CI_COMMIT_SHORT_SHA}</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">unless-stopped</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">env_file</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">.env</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ENVIRONMENT=${ENVIRONMENT}</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;"># staging, prod</span></span></code></pre></div><h2 id="ü§ñ-automatiser-les-tests" tabindex="-1">ü§ñ Automatiser les tests <a class="header-anchor" href="#ü§ñ-automatiser-les-tests" aria-label="Permalink to &quot;ü§ñ Automatiser les tests&quot;">‚Äã</a></h2><p>Tous nos tests sont impl√©ment√©s en Python √† l&#39;aide de <code>pytest</code>. Nous couvrons les tests unitaires, les tests d&#39;int√©gration et l&#39;analyse de couverture. Cependant, nous testons g√©n√©ralement seulement les parties critiques de notre code, telles que les d√©finitions Dagster, les ressources personnalis√©es, le code Python et le parsing DBT. Nous ne testons g√©n√©ralement pas les requ√™tes SQL √† moins qu&#39;elles ne contiennent une logique complexe.</p><h2 id="üöÄ-automatiser-le-deploiement" tabindex="-1">üöÄ Automatiser le d√©ploiement <a class="header-anchor" href="#üöÄ-automatiser-le-deploiement" aria-label="Permalink to &quot;üöÄ Automatiser le d√©ploiement&quot;">‚Äã</a></h2><h3 id="cycle-de-deploiement-de-notre-plateforme-de-donnees" tabindex="-1">Cycle de d√©ploiement de notre plateforme de donn√©es <a class="header-anchor" href="#cycle-de-deploiement-de-notre-plateforme-de-donnees" aria-label="Permalink to &quot;Cycle de d√©ploiement de notre plateforme de donn√©es&quot;">‚Äã</a></h3><p>Le cycle de d√©ploiement de notre plateforme de donn√©es consiste en les √©tapes suivantes :</p><ol start="0"><li>D√©veloppement local ‚Üí un d√©veloppeur travaille sur une nouvelle fonctionnalit√© dans son environnement local.</li><li>Commit ‚Üí le d√©veloppeur valide ses modifications dans la branche principale ou une branche de fonctionnalit√©.</li><li>Build ‚Üí GitLab CI/CD construit le code et l&#39;empaquette dans une image Docker.</li><li>Test ‚Üí GitLab CI/CD ex√©cute les tests et g√©n√®re un rapport de couverture.</li><li>D√©ployer en DEV ‚Üí GitLab CI/CD d√©ploie le code dans l&#39;environnement de d√©veloppement.</li><li>Tag de version ‚Üí lorsque le d√©veloppeur est satisfait des modifications, il cr√©e un tag de version.</li><li>D√©ployer en STAGING ‚Üí GitLab CI/CD d√©ploie le code dans l&#39;environnement de staging.</li><li>D√©ployer en PROD ‚Üí Apr√®s validation en staging, GitLab CI/CD d√©ploie le code dans l&#39;environnement de production.</li></ol><div align="center" class=""><img src="https://raw.githubusercontent.com/tintamarre/tintamarre.github.io/refs/heads/master/src/assets/diagrams/dagster_code_location_cycle.drawio.png" alt="Cycle de d√©ploiement de l&#39;emplacement de code Dagster" width="600" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400">Cycle de d√©ploiement de l&#39;emplacement de code Dagster</span></div></div><h3 id="cycle-de-deploiement-de-nos-projets-dbt" tabindex="-1">Cycle de d√©ploiement de nos projets DBT <a class="header-anchor" href="#cycle-de-deploiement-de-nos-projets-dbt" aria-label="Permalink to &quot;Cycle de d√©ploiement de nos projets DBT&quot;">‚Äã</a></h3><p>Lorsqu&#39;une nouvelle version est cr√©√©e, le projet DBT est automatiquement versionn√© √† l&#39;aide de l&#39;outil <code>release</code>. La version est incr√©ment√©e et un changelog est g√©n√©r√©. Le projet DBT est ensuite analys√© √† l&#39;aide de <code>dbt parse</code> pour produire le fichier <code>manifest.json</code>, qui contient les m√©tadonn√©es du projet DBT. Ce fichier est utilis√© par Dagster pour d√©couvrir les mod√®les DBT et leurs d√©pendances.</p><h4 id="le-cycle-de-version-de-nos-projets-dbt-consiste-en-les-etapes-suivantes" tabindex="-1">Le cycle de version de nos projets DBT consiste en les √©tapes suivantes : <a class="header-anchor" href="#le-cycle-de-version-de-nos-projets-dbt-consiste-en-les-etapes-suivantes" aria-label="Permalink to &quot;Le cycle de version de nos projets DBT consiste en les √©tapes suivantes :&quot;">‚Äã</a></h4><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight has-focused-lines has-diff"><code><span class="line"><span style="color:#676E95;font-style:italic;"># .gitlab-ci.yml</span></span>
<span class="line has-focus"><span style="color:#F07178;">sqlfluff</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">allow_failure</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">sqlfluff lint models</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#F07178;">release</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">VERSION=$(release next-version)</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">|</span></span>
<span class="line"><span style="color:#C3E88D;">      sed -i &quot;s/version: \&quot;[^\&quot;]*\&quot;/version: \&quot;$VERSION\&quot;/&quot; &quot;$FILETOCHANGE&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">release changelog</span></span>
<span class="line has-focus"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">release commit-and-tag --create-tag-pipeline CHANGELOG.md ${DBT_PATH}/dbt_project.yml</span><span style="color:#BABED8;"> </span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#F07178;">dagster_submodule</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">if</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">$CI_COMMIT_TAG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">git add .</span></span>
<span class="line has-focus"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">git diff --cached --quiet || git commit -m &quot;Update dbt submodule&quot;</span><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># Pousser les modifications sans forcer la suppression</span></span>
<span class="line has-focus"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">git push origin dagster_submodule</span><span style="color:#BABED8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Cette √©tape publie un artefact pour la documentation DBT.</span></span>
<span class="line has-focus"><span style="color:#F07178;">pages</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dbt_docs</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">only</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">main</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line has-focus"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dbt docs generate</span><span style="color:#BABED8;"> </span></span></code></pre></div><h2 id="üëÄ-automatiser-l-observabilite" tabindex="-1">üëÄ Automatiser l&#39;observabilit√© <a class="header-anchor" href="#üëÄ-automatiser-l-observabilite" aria-label="Permalink to &quot;üëÄ Automatiser l&#39;observabilit√©&quot;">‚Äã</a></h2><p>L&#39;observabilit√© de notre plateforme de donn√©es est un aspect cl√© de la mise en ≈ìuvre d&#39;une Plateforme de Donn√©es. Elle nous permet de surveiller la sant√© de nos syst√®mes (1) et de nos pipelines de donn√©es (2), de d√©tecter les probl√®mes rapidement et d&#39;assurer la qualit√© de nos donn√©es (3).</p><div align="center" class=""><img src="https://raw.githubusercontent.com/tintamarre/tintamarre.github.io/refs/heads/master/src/assets/images/ms-team-panopticon.png" alt="Panopticon" width="600" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400">Panopticon</span></div></div><h3 id="observabilite-de-notre-pile-conteneurs" tabindex="-1">Observabilit√© de notre pile (conteneurs) <a class="header-anchor" href="#observabilite-de-notre-pile-conteneurs" aria-label="Permalink to &quot;Observabilit√© de notre pile (conteneurs)&quot;">‚Äã</a></h3><p>Pour l&#39;observabilit√© de nos syst√®mes, nous utilisons <a href="https://www.elastic.co/kibana" target="_blank" rel="noreferrer">Kibana</a> et <a href="https://dozzle.dev/" target="_blank" rel="noreferrer">Dozzle</a> pour surveiller les journaux et les m√©triques de notre plateforme de donn√©es.</p><h3 id="observabilite-de-nos-pipelines-de-donnees" tabindex="-1">Observabilit√© de nos pipelines de donn√©es <a class="header-anchor" href="#observabilite-de-nos-pipelines-de-donnees" aria-label="Permalink to &quot;Observabilit√© de nos pipelines de donn√©es&quot;">‚Äã</a></h3><p>Comme un <a href="https://fr.wikipedia.org/wiki/Panoptique" target="_blank" rel="noreferrer">panopticon</a> ou un <strong>hub d&#39;observabilit√© centralis√©</strong>, nous utilisons principalement un canal MS Teams (accessible par toutes les parties prenantes) pour centraliser l&#39;observabilit√© de notre plateforme de donn√©es en un seul endroit. Certaines notifications personnalis√©es sont √©galement envoy√©es via NTFY et Email pour des √©v√©nements ou alertes sp√©cifiques.</p><h3 id="observabilite-de-nos-donnees" tabindex="-1">Observabilit√© de nos donn√©es <a class="header-anchor" href="#observabilite-de-nos-donnees" aria-label="Permalink to &quot;Observabilit√© de nos donn√©es&quot;">‚Äã</a></h3><p>Pour l&#39;observabilit√© de nos donn√©es, nous utilisons les fonctionnalit√©s int√©gr√©es de Dagster pour v√©rifier la qualit√© de nos donn√©es. Dagster fournit un ensemble de fonctionnalit√©s d&#39;observabilit√© (personnalis√©es ou int√©gr√©es) qui nous permettent de surveiller la sant√© de nos pipelines de donn√©es et de d√©tecter les probl√®mes rapidement.</p><p>M√™me sans √©crire de v√©rifications personnalis√©es, l&#39;interface utilisateur de Dagster nous permet de surveiller la qualit√© de nos donn√©es. Voici comment nous avons trouv√© un probl√®me de qualit√© dans l&#39;un de nos pipelines de donn√©es :</p><div align="center" class=""><img src="https://raw.githubusercontent.com/tintamarre/tintamarre.github.io/refs/heads/master/src/assets/images/dagster_asset_quality.png" alt="Comment la fonctionnalit√© d&#39;observabilit√© nous a aid√©s √† d√©tecter des probl√®mes de qualit√©" width="600" class="rounded object-cover"><div class="inline-flex items-center"><span class="text-gray-600 dark:text-gray-400">Comment la fonctionnalit√© d&#39;observabilit√© nous a aid√©s √† d√©tecter des probl√®mes de qualit√©</span></div></div><hr><p>Dans cet article, nous avons explor√© comment automatiser le d√©ploiement de pipelines de donn√©es dans une organisation polyc√©phale comme la FWB. Nous avons vu comment utiliser Dagster comme orchestrateur, dbt-core pour les transformations de donn√©es, et GitLab CI/CD pour automatiser le processus de d√©ploiement.</p><p>Nous avons √©galement discut√© de l&#39;importance de la <strong>modularit√©</strong> et de la <strong>r√©utilisabilit√©</strong> des composants pour abaisser la barri√®re technique pour les analystes de donn√©es et les gestionnaires de donn√©es. En automatisant le processus de d√©ploiement, nous pouvons nous assurer que chaque commit est test√© et valid√© avant d&#39;√™tre d√©ploy√© en production, ce qui encourage la participation des analystes de donn√©es et des gestionnaires de donn√©es dans le d√©veloppement de pipelines de donn√©es.</p><p>Mais comme indiqu√© dans l&#39;introduction, le <strong>niveau de participation est inversement proportionnel √† la barri√®re technique</strong>. Plus la configuration est complexe, moins les analystes de donn√©es et les gestionnaires de donn√©es sont susceptibles de participer au d√©veloppement de pipelines de donn√©es.</p><p>Dans le prochain article, nous explorerons comment abaisser encore davantage la barri√®re technique en fournissant des ressources conviviales pour que les professionnels des donn√©es interagissent avec la plateforme de donn√©es. Nous discuterons √©galement de la fa√ßon d&#39;am√©liorer la litt√©ratie des donn√©es parmi les analystes de donn√©es et les gestionnaires de donn√©es pour les encourager √† participer au d√©veloppement de pipelines de donn√©es.</p><ul><li><a href="/blog/posts/2025/data_platform_in_fwb_02_lower_barrier-fr.html">Partie 3 : Comment les ressources personnalis√©es et la formation aident √† abaisser la barri√®re</a></li></ul></div></div></main><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-56839c3d data-v-9d18c063><div class="container" data-v-9d18c063><p class="message" data-v-9d18c063>Made with ‚ù§Ô∏è</p><p class="copyright" data-v-9d18c063>WTFPL License | <a href="https://github.com/tintamarre/tintamarre.github.io">Source code</a></p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"blog_index.md\":\"57988f75\",\"blog_archives.md\":\"33318e0a\",\"blog_authors_martin-erpicum.md\":\"f1f80e29\",\"assets_datasets_bestaddress_wal.md\":\"ecb51f93\",\"blog_posts_2024_address_lookup-part1-problematic.md\":\"16d21d9e\",\"assets_datasets_bestaddress_bxl.md\":\"2eb09674\",\"assets_datasets_bestaddress_vld.md\":\"1a127223\",\"blog_posts_2025_dagster-case-study.md\":\"29345450\",\"blog__partials_basics.md\":\"5ca53da8\",\"blog_posts_2024_hello_world.md\":\"fde775f9\",\"blog_posts_2024_address_lookup-part2b-messing-around.md\":\"b80cf211\",\"blog_posts_2024_address_lookup-part2-sourcing.md\":\"12079c71\",\"blog_posts_2024_tax_brackets_proposition.md\":\"60931aa1\",\"blog_posts_2025_address_lookup-part3-api.md\":\"d3dbc026\",\"blog_posts_2025_data_platform_in_fwb_00_intro-fr.md\":\"8c0c2c32\",\"blog_posts_2025_data_platform_in_fwb_02_lower_barrier-fr.md\":\"bd3f52e5\",\"blog_posts_2025_data_platform_in_fwb_01_automate-fr.md\":\"40533231\",\"blog_posts_2025_data_platform_in_fwb_02_lower_barrier.md\":\"51171dc9\",\"blog_posts_2025_data_platform_in_fwb_01_automate.md\":\"1f803c89\",\"blog_posts_2025_how-to-reuse-a-calendar.md\":\"925266ef\",\"index.md\":\"b7093cc4\",\"theme-test.md\":\"a02b85b8\",\"blog_tags.md\":\"c6de3712\",\"blog_posts_2025_data_platform_in_fwb_00_intro.md\":\"79ff454f\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Tintamarre\",\"description\":\"Personal blog of Martin Erpicum\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"blog\":{\"title\":\"\",\"description\":\"Some thoughts\",\"defaultAuthor\":\"Martin Erpicum\",\"categoryIcons\":{\"article\":\"i-[heroicons-outline/book-open]\",\"tutorial\":\"i-[heroicons-outline/academic-cap]\",\"document\":\"i-[heroicons-outline/annotation]\",\"experimentation\":\"i-[heroicons-outline/beaker]\"},\"tagIcons\":{\"github\":\"i-[carbon/logo-github]\",\"vue\":\"i-[carbon/logo-vue]\"}},\"footer\":{\"message\":\"Made with ‚ù§Ô∏è\",\"copyright\":\"WTFPL License | <a href=\\\"https://github.com/tintamarre/tintamarre.github.io\\\">Source code</a>\"},\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Blog\",\"items\":[{\"text\":\"Blog Home\",\"link\":\"/blog/\",\"activeMatch\":\"/blog/$\"},{\"text\":\"Tags\",\"link\":\"/blog/tags\",\"activeMatch\":\"/blog/tags\"},{\"text\":\"Archives\",\"link\":\"/blog/archives\",\"activeMatch\":\"/blog/archives\"}]}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>